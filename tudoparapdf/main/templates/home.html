<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Home da pagina</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <h1>Hello World</h1>

        <form method='POST' action='{% url 'index_test' %}' enctype='multipart/form-data'>
            {% csrf_token %}
            <input type='text' name='nome_arquivo' placeholder='Nome do arquivo'><br></br>
            <div id='images'>
                <input type='file' name='file[]'><br></br>
            </div>
            <input type='button' name='add_image' id='add_image' value='Add Image'>
            <input type='submit' value='Register'>
        </form>

        <h1>-----------</h1>
        


    <script>
        document.getElementById('add_image').onclick=function (ev) {
            
            var image = document.getElementById('images');

            var preview = document.createElement('img');
            preview.style.width = '100px';
            preview.style.height = '100px';

            var newInput = document.createElement('input');
            newInput.type = 'file';
            newInput.name = 'file[]';

            var br = document.createElement('br');
            var br1 = document.createElement('br');

            newInput.onchange = function (ev1) {
                if(this.files && this.files[0]){
                    var fileReader = new FileReader();

                    fileReader.onload = function (ev2) {
                        preview.src = ev2.target.result;
                    };

                    fileReader.readAsDataURL(this.files[0])
                }
            }

            image.appendChild(preview);
            image.appendChild(newInput);
            image.appendChild(br);
            image.appendChild(br1);
        }
    </script>
    </body>
</html>